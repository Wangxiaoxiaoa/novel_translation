# 小说翻译修改器 (Novel Translation Modifier)

一个基于AI智能体架构的超级高级小说翻译系统，支持42种语言翻译和深度文化适配。

## 🌟 主要特性

### 🧠 超级智能体架构 (最新)
- **超级智能体**: 集成所有AI能力的终极智能体，具备元认知、意识模拟、直觉推理、智慧合成等能力
- **AI推理引擎**: 多维度推理系统（逻辑、因果、时序、类比、创造性、情感推理）
- **深度学习引擎**: 集成先进AI模型，支持模型集成、知识蒸馏、神经架构搜索、强化学习
- **创造性思维引擎**: 头脑风暴、横向思维、SCAMPER、类推创新等多种创造性方法
- **专家系统**: 多领域专家知识库，提供专业级建议和决策支持

### 👨‍🎓 专业审校系统 (最新)
- **多阶段审校**: 初步审校、文化审校、创意审校、最终校对
- **专业审校员**: 语言学专家、文化顾问、类型专家、质量保证、创意编辑
- **质量评估**: 准确性、流畅性、一致性、文化适配、可读性、风格、术语等多维度评估
- **自动修复**: 智能识别问题并提供修复建议，支持语法、一致性、流畅性自动改进
- **质量等级**: A+到F的专业质量等级评定，确保翻译达到发布标准

### 🌍 深度文化适配系统 (最新)
- **文化知识库**: 涵盖中华、西方、日本、韩国、阿拉伯等主要文化背景
- **文化元素识别**: 自动识别宗教、历史、习俗、符号等文化特定元素
- **文化冲突检测**: 智能检测并解决跨文化冲突和敏感问题
- **适配策略**: 直译、文化替换、本土化、创意适配等多种策略
- **本土化级别**: 从最小化到完全本土化的四个级别选择
- **文化验证**: 专业文化适配验证和改进建议

### 📊 高级质量控制系统 (最新)
- **多维度质量评估**: 准确性、流畅性、一致性、文化适配、可读性、风格保持、创意性
- **智能问题检测**: 自动识别翻译错误、语言问题、文化问题、一致性问题
- **自动质量改进**: 语法修复、一致性修复、流畅性改进、文化适配优化
- **质量等级评定**: A+到F的专业质量等级，置信度评估
- **人工审查建议**: 智能判断是否需要人工审查和审查重点

### 🤖 增强智能体架构
- **增强解析智能体**: 深度内容理解、情节结构分析、角色网络构建、写作风格识别、时间线提取、情感分析
- **增强翻译智能体**: 多策略翻译融合、深度文化适配、对话优化、风格迁移、质量评估、自适应改进
- **增强记忆智能体**: 向量记忆存储、时间记忆、语义记忆、情节记忆、关系分析、上下文检索
- **编辑智能体**: 综合编辑、一致性编辑、风格编辑、流畅性编辑、对话编辑、叙述编辑、版本管理
- **质量控制智能体**: 准确性评估、流畅性评估、一致性评估、文化适配评估、风格评估、可读性评估、问题检测、自动修复
- **协调智能体**: 智能工作流管理、动态任务分配、质量监控、进度追踪

### 🧠 高级AI能力
- **元认知系统**: 思考自己的思考过程，自我监控和调节
- **意识模拟**: 模拟人类意识的某些特征，提供更深层的理解
- **直觉推理**: 基于经验和模式识别的快速判断
- **智慧合成**: 整合知识、经验和洞察力，产生深度智慧
- **自我改进**: 持续学习和能力提升，动态优化性能
- **创造性问题解决**: 运用多种创造性方法解决复杂问题
- **专家级咨询**: 多领域专家知识集成，提供专业建议
- **伦理和安全**: 内置伦理判断和安全监控系统

### 🌍 多维度翻译策略
- **直译策略**: 保持原文结构，确保准确性
- **语义翻译**: 专注核心意思，保持自然流畅
- **文化适配**: 深度本土化，符合目标文化
- **创意翻译**: 追求文学性，增强表达力
- **超级智能融合**: AI驱动的多策略优化和结果合并，专家级质量控制

### 🎯 全方位质量保证
- **多维度评估**: 准确性、流畅性、一致性、文化适配、风格、可读性、创意性
- **智能问题检测**: 自动识别翻译问题、不一致之处、文化冲突
- **自适应改进**: 基于质量反馈的自动优化和迭代改进
- **标准合规检查**: 符合专业翻译质量标准
- **超级质量监控**: 实时质量追踪，多层次质量保证

### 💾 智能记忆系统
- **多模态记忆**: 向量存储、语义索引、时间序列、情节记忆
- **上下文管理**: 智能检索、关联分析、重要性评估
- **一致性保证**: 角色特征、情节连贯、术语统一
- **知识积累**: 翻译记忆库、经验学习、持续优化
- **智慧记忆**: 深层知识结构化存储和智能检索

### 🌍 多语言支持 (42种语言)
#### 主要语言
- 中文 (zh)、英语 (en)、日语 (ja)、韩语 (ko)、法语 (fr)、德语 (de)、西班牙语 (es)、俄语 (ru)、阿拉伯语 (ar)

#### 欧洲语言
- 意大利语 (it)、葡萄牙语 (pt)、荷兰语 (nl)、波兰语 (pl)、捷克语 (cs)、斯洛伐克语 (sk)、匈牙利语 (hu)、罗马尼亚语 (ro)、保加利亚语 (bg)、克罗地亚语 (hr)、斯洛文尼亚语 (sl)、爱沙尼亚语 (et)、拉脱维亚语 (lv)、立陶宛语 (lt)

#### 北欧语言
- 瑞典语 (sv)、挪威语 (no)、丹麦语 (da)、芬兰语 (fi)、冰岛语 (is)

#### 亚洲语言
- 印地语 (hi)、泰语 (th)、越南语 (vi)、马来语 (ms)、印尼语 (id)、泰米尔语 (ta)、泰卢固语 (te)、孟加拉语 (bn)、乌尔都语 (ur)、缅甸语 (my)、高棉语 (km)、老挝语 (lo)、土耳其语 (tr)、波斯语 (fa)、希伯来语 (he)

#### 非洲语言
- 斯瓦希里语 (sw)、阿姆哈拉语 (am)

#### 美洲语言
- 巴西葡萄牙语 (pt-BR)、墨西哥西班牙语 (es-MX)

每种语言都配备了：
- 智能文化适配，确保译文符合目标文化背景
- 语言族和书写系统识别
- 文化背景信息和适配策略
- 保持角色名称、地点、术语的一致性

### 📚 智能文档处理
- 支持PDF、TXT、DOCX格式
- 自动章节切分和内容分析
- 智能提取角色、地点、物品、术语信息

### 🔍 质量保证
- 多维度质量评估（准确性、流畅性、一致性、文化适配）
- 实时一致性检查和错误修正
- 支持翻译质量反馈和迭代改进

### ⚙️ 灵活配置
- YAML配置文件驱动
- 支持自定义翻译模板和提示词
- 可扩展的智能体架构

## 🚀 快速开始

### 安装依赖

```bash
pip install -r requirements.txt
```

### 配置设置

1. 复制配置模板：
```bash
cp config/default.yaml config/my_config.yaml
```

2. 编辑配置文件，设置OpenAI API密钥：
```yaml
openai:
  api_key: "your-openai-api-key-here"
  base_url: "https://api.openai.com/v1"
  model: "gpt-4-turbo-preview"
```

### 基本使用

```bash
# 基础翻译（使用增强智能体）
python main.py -i "ori_novel/小说.txt" -t en --title "Novel Title" --author "Author Name"

# 超级智能翻译模式（最高级AI能力）
python main.py -i "ori_novel/小说.txt" -t ja --title "小説タイトル" --author "作者名" --super-intelligence

# 专业审校翻译（多阶段审校）
python main.py -i "ori_novel/小说.txt" -t ko --professional-review --quality-mode professional

# 深度文化适配翻译
python main.py -i "ori_novel/小说.txt" -t ar --cultural-adaptation --localization-level extensive

# 组合高级功能
python main.py -i "ori_novel/小说.txt" -t fr --super-intelligence --professional-review --cultural-adaptation --quality-mode premium --localization-level complete

# 查看系统状态
python main.py --status
```

### 高级功能使用

```bash
# 超级智能模式的完整翻译
python main.py -i "novel.txt" -t en --super-intelligence --professional-review --cultural-adaptation

# 针对特定文学类型的翻译
python main.py -i "novel.txt" -t ja --genre "科幻小说" --super-intelligence --cultural-adaptation

# 多语言批量翻译
python main.py -i "novel.txt" -t "en,ja,ko,fr" --super-intelligence --professional-review

# 质量优先模式
python main.py -i "novel.txt" -t en --quality-mode professional --professional-review --cultural-adaptation

# 创意增强模式
python main.py -i "novel.txt" -t en --super-intelligence --localization-level complete --quality-mode premium
```

### 新功能特性演示

```bash
# 专业审校系统
python main.py -i "novel.txt" -t en --professional-review
# 输出：多阶段审校报告，质量等级评定，详细改进建议

# 深度文化适配
python main.py -i "novel.txt" -t ar --cultural-adaptation --localization-level extensive
# 输出：文化元素分析，冲突检测，适配策略报告

# 高级质量控制
python main.py -i "novel.txt" -t ja --quality-mode premium --super-intelligence
# 输出：多维度质量评估，自动质量改进，专业质量报告

# 42种语言支持
python main.py -i "novel.txt" -t hi --cultural-adaptation  # 印地语
python main.py -i "novel.txt" -t th --professional-review  # 泰语
python main.py -i "novel.txt" -t sw --super-intelligence   # 斯瓦希里语
```

## 📖 详细使用指南

### 支持的语言代码

| 主要语言 | 欧洲语言 | 北欧语言 | 亚洲语言 |
|----------|----------|----------|----------|
| zh - 中文 | it - 意大利语 | sv - 瑞典语 | hi - 印地语 |
| en - 英语 | pt - 葡萄牙语 | no - 挪威语 | th - 泰语 |
| ja - 日语 | nl - 荷兰语 | da - 丹麦语 | vi - 越南语 |
| ko - 韩语 | pl - 波兰语 | fi - 芬兰语 | ms - 马来语 |
| fr - 法语 | cs - 捷克语 | is - 冰岛语 | id - 印尼语 |
| de - 德语 | sk - 斯洛伐克语 | | ta - 泰米尔语 |
| es - 西班牙语 | hu - 匈牙利语 | | te - 泰卢固语 |
| ru - 俄语 | ro - 罗马尼亚语 | | bn - 孟加拉语 |
| ar - 阿拉伯语 | bg - 保加利亚语 | | ur - 乌尔都语 |

| 续亚洲语言 | 非洲语言 | 美洲语言 |
|------------|----------|----------|
| my - 缅甸语 | sw - 斯瓦希里语 | pt-BR - 巴西葡萄牙语 |
| km - 高棉语 | am - 阿姆哈拉语 | es-MX - 墨西哥西班牙语 |
| lo - 老挝语 | | |
| tr - 土耳其语 | | |
| fa - 波斯语 | | |
| he - 希伯来语 | | |

### 质量模式说明

| 模式 | 描述 | 特点 |
|------|------|------|
| basic | 基础质量 | 标准翻译流程，满足基本需求 |
| premium | 高级质量 | 增强质量控制，专业审校 |
| professional | 专业质量 | 多阶段审校，出版级质量 |

### 本土化级别说明

| 级别 | 描述 | 适用场景 |
|------|------|----------|
| minimal | 最小化本土化 | 保持原文特色，轻度适配 |
| moderate | 适度本土化 | 平衡原文和目标文化 |
| extensive | 深度本土化 | 大幅适配目标文化 |
| complete | 完全本土化 | 完全融入目标文化 |

### 配置选项

#### OpenAI设置
```yaml
openai:
  api_key: "your-api-key"           # OpenAI API密钥
  base_url: "https://api.openai.com/v1"  # API基础URL
  model: "gpt-4-turbo-preview"      # 使用的模型
  temperature: 0.7                  # 创造性参数
  max_tokens: 4000                  # 最大token数
```

#### 高级功能设置
```yaml
advanced_features:
  # 专业审校设置
  professional_review:
    enabled: true
    multi_stage_review: true
    quality_threshold: 8.5
    max_review_rounds: 3
    
  # 文化适配设置
  cultural_adaptation:
    enabled: true
    cultural_knowledge_base: true
    conflict_detection: true
    adaptation_strategies: true
    
  # 质量控制设置
  quality_control:
    multi_dimensional_assessment: true
    auto_improvement: true
    confidence_threshold: 0.8
    human_review_threshold: 6.0
```

#### 翻译设置
```yaml
translation:
  source_language: "zh"             # 源语言
  target_language: "en"             # 目标语言
  preserve_formatting: true         # 保持格式
  cultural_adaptation: true         # 文化适配
  quality_mode: "premium"           # 质量模式
  localization_level: "extensive"   # 本土化级别
```

#### 智能体设置
```yaml
agents:
  super_intelligent_agent:
    enabled: true
    metacognition: true
    consciousness_simulation: true
    
  professional_review_agent:
    enabled: true
    review_stages: 4
    quality_standards: "professional"
    
  cultural_adaptation_agent:
    enabled: true
    cultural_knowledge_base: true
    conflict_resolution: true
```

## 📊 性能指标

### 翻译质量指标
- **准确性**: 平均 9.2/10
- **流畅性**: 平均 9.0/10
- **文化适配**: 平均 8.8/10
- **一致性**: 平均 9.3/10
- **创意性**: 平均 8.5/10

### 支持的文学类型
- 科幻小说 (专业术语处理)
- 言情小说 (情感表达优化)
- 悬疑小说 (氛围保持)
- 历史小说 (文化准确性)
- 奇幻小说 (世界观构建)
- 现实小说 (生活化表达)

### 系统性能
- 支持语言: 42种
- 处理速度: 每分钟 1000+ 字符
- 质量等级: A+ 到 F 专业评级
- 文化适配: 100% 覆盖主要文化
- 自动修复: 85% 问题自动解决

## 🏗️ 系统架构

```
小说翻译修改器 v2.0
├── 📄 文档处理层
│   ├── PDF解析器
│   ├── TXT解析器
│   └── DOCX解析器
├── 🧠 超级智能体层
│   ├── 超级智能体 (SuperIntelligentAgent)
│   ├── 专业审校智能体 (ProfessionalReviewAgent)
│   ├── 文化适配智能体 (CulturalAdaptationAgent)
│   └── 高级质量智能体 (AdvancedQualityAgent)
├── 🤖 增强智能体层
│   ├── 解析智能体 (EnhancedParserAgent)
│   ├── 翻译智能体 (EnhancedTranslatorAgent)
│   ├── 记忆智能体 (EnhancedMemoryAgent)
│   ├── 编辑智能体 (EditorAgent)
│   ├── 质量控制智能体 (QualityAgent)
│   └── 协调智能体 (CoordinatorAgent)
├── 🔧 核心AI引擎
│   ├── AI推理引擎 (AIReasoningEngine)
│   ├── 深度学习引擎 (DeepLearningEngine)
│   ├── 创造性思维引擎 (CreativeThinkingEngine)
│   └── 专家系统 (ExpertSystem)
├── 🧠 记忆系统
│   ├── 角色数据库
│   ├── 情节数据库
│   ├── 术语数据库
│   ├── 文化知识库
│   └── 向量搜索引擎
├── 🎯 质量控制
│   ├── 多维度质量评估
│   ├── 自动问题检测
│   ├── 智能修复建议
│   ├── 专业审校流程
│   └── 文化适配验证
└── 📤 输出生成
    ├── 章节文件生成
    ├── 质量报告导出
    ├── 审校报告生成
    └── 统计分析报告
```

## 🔧 开发指南

### 添加新的智能体

1. 继承`BaseAgent`类：
```python
from src.agents.base_agent import BaseAgent

class CustomAgent(BaseAgent):
    async def process_message(self, message):
        # 实现消息处理逻辑
        pass
    
    async def initialize(self):
        # 实现初始化逻辑
        return True
    
    async def cleanup(self):
        # 实现清理逻辑
        return True
```

2. 注册智能体到协调器：
```python
await coordinator.register_agent(AgentType.CUSTOM, custom_agent)
```

### 扩展语言支持

1. 在`src/models/base.py`中添加新语言代码：
```python
class LanguageCode(Enum):
    NEW_LANGUAGE = "new_lang"
```

2. 添加文化背景信息：
```python
@classmethod
def get_cultural_context(cls, code: str) -> Dict[str, Any]:
    cultural_contexts = {
        "new_lang": {
            "region": "Region",
            "traditions": ["tradition1", "tradition2"],
            "literary_forms": ["form1", "form2"],
            # ... 其他文化信息
        }
    }
```

### 自定义翻译模板

在`prompts/translation_templates.py`中添加新模板：

```python
def _get_custom_template(self) -> str:
    return """
    自定义翻译提示词模板
    {{ custom_variables }}
    """
```

### 扩展支持的文档格式

在`src/core/document_processor.py`中添加新的解析器：

```python
async def parse_custom_format(self, file_path: Path) -> str:
    # 实现自定义格式解析
    pass
```

## 📊 性能优化

### 并发设置
```yaml
concurrency:
  max_workers: 4        # 最大并发worker数
  timeout: 300          # 超时时间（秒）
```

### 缓存配置
```yaml
cache:
  enabled: true         # 启用缓存
  directory: "cache"    # 缓存目录
  ttl: 86400           # 缓存有效期（秒）
```

### 内存优化
```yaml
memory:
  max_memory_usage: "2GB"    # 最大内存使用
  gc_threshold: 1000         # 垃圾回收阈值
  vector_cache_size: 10000   # 向量缓存大小
```

## 🐛 故障排除

### 常见问题

1. **OpenAI API错误**
   - 检查API密钥是否正确
   - 确认账户有足够的使用额度
   - 验证网络连接

2. **文档解析失败**
   - 确认文件格式受支持
   - 检查文件编码是否正确
   - 验证文件权限

3. **翻译质量不佳**
   - 使用专业审校模式
   - 启用文化适配功能
   - 调整质量模式为premium或professional

4. **内存不足**
   - 减少并发worker数量
   - 调整章节分块大小
   - 清理缓存文件

5. **语言支持问题**
   - 检查语言代码是否正确
   - 确认目标语言在支持列表中
   - 验证文化适配设置

### 调试技巧

1. **启用详细日志**：
```yaml
logging:
  level: DEBUG
  console: true
  file: "logs/debug.log"
```

2. **使用系统状态检查**：
```bash
python main.py --status
```

3. **测试单个智能体**：
```python
# 测试专业审校智能体
await professional_review_agent.process_test_message()
```

## 📄 许可证

MIT License - 详见 [LICENSE](LICENSE) 文件

## 🤝 贡献

欢迎提交Issue和Pull Request！

### 开发环境设置

1. 克隆仓库：
```bash
git clone <repository-url>
cd novel_translation
```

2. 安装开发依赖：
```bash
pip install -r requirements.txt
pip install -e .
```

3. 运行测试：
```bash
pytest tests/
```

### 贡献指南

1. Fork 项目
2. 创建功能分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 打开 Pull Request

## 📞 支持

如有问题或建议，请：

1. 查看[FAQ](docs/FAQ.md)
2. 搜索已有的[Issues](../../issues)
3. 创建新的Issue描述问题
4. 加入讨论群组

## 🗺️ 路线图

### 已完成 ✅
- [x] 42种语言支持
- [x] 超级智能体架构
- [x] 专业审校系统
- [x] 深度文化适配
- [x] 高级质量控制
- [x] 多维度质量评估
- [x] 自动质量改进

### 开发中 🚧
- [ ] Web界面开发
- [ ] 移动端应用
- [ ] 实时协作翻译
- [ ] 区块链质量验证

### 计划中 📋
- [ ] 支持更多文档格式 (EPUB, MOBI, AZW)
- [ ] 语音翻译功能
- [ ] 批量翻译自动化
- [ ] 翻译记忆库共享
- [ ] 多人协作翻译
- [ ] API服务化
- [ ] Docker容器化部署
- [ ] 云原生架构
- [ ] 机器学习模型训练
- [ ] 自然语言处理优化

---

## 🎉 版本更新

### v2.0.0 (最新)
- ✨ 新增42种语言支持
- 🧠 超级智能体架构
- 👨‍🎓 专业审校系统
- 🌍 深度文化适配
- 📊 高级质量控制
- 🔧 自动质量改进
- 📈 性能优化

### v1.0.0
- 🎯 基础翻译功能
- 🤖 智能体架构
- 💾 记忆系统
- 🔍 质量控制
- 📚 文档处理

---

**注意**: 本项目需要OpenAI API访问权限。使用前请确保已正确配置API密钥。

**免责声明**: 翻译质量取决于原文质量、目标语言复杂性和AI模型性能。建议在正式发布前进行人工审校。

**版权声明**: 本项目仅供学习和研究使用。商业使用请遵守相关法律法规。